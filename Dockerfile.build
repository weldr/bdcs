FROM welder/fedora:latest

RUN dnf -y install cabal-install wget diffutils beakerlib ghc-vector-th-unbox-devel && \
    dnf clean all

ENV PATH /root/.cabal/bin:$PATH

# source is already bind-mounted here
WORKDIR /bdcs/

# build the application and execute integration tests
# when the container is started
ENTRYPOINT ["/bdcs/entrypoint-integration-test.sh"]
